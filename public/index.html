<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Decision Support System for Agri-Tech Investements</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- Load libraries locally -->
  <script src="libs/chart.js"></script>
  <script src="libs/chartjs-plugin-annotation3.min.js"></script>
  <script src="libs/pdfmake.min.js"></script>
  <script src="libs/vfs_fonts.js"></script>

  <script src="libs/html2canvas.min.js"></script>
  <script src="libs/jspdf.umd.min.js"></script>
  <script src="libs/FileSaver.min.js"></script>

</head>

<body>
  <div id="pageWrapper">
    <h1>Decision Support System for Agri-Tech Investements</h1>

    <form id="investmentForm">

      <div class="input-row">
        <div class="input-group">
          <label for="upfrontInvestment">Initial Investment Cost</label>
          <input type="number" id="upfrontInvestment" min="0" step="any" required />
        </div>

        <div class="input-group">
          <label for="projectLifetime">Project Lifetime (years)</label>
          <input type="number" id="projectLifetime" min="1" step="1" required />
        </div>

        <div class="input-group">
          <label for="discountRate">Discount Rate (%)</label>
          <input type="number" id="discountRate" min="0" step="any" required />
        </div>

        <!-- New Currency Dropdown -->
        <div class="input-group">
          <label for="currencySelect">Select Currency</label>
          <select id="currencySelect" required></select>
        </div>


      </div>

      
      

      <div id="annualCashFlowsSection">
        <label>Enter detailed Benefits and Costs for each year (Year 1 to Project Lifetime):</label>
        <div class="yearly-inputs" id="yearlyInputs"></div>
        <div class="totals">
          Total Benefits (Cash Inflows): <span id="totalBenefits">0</span><br/>
          Total Costs (Cash Outflows): <span id="totalCosts">0</span>
        </div>
      </div>

      
      <button id="calculateBtn" type="button">Calculate</button>
      <button id="btnFormalReport" class="primary">Formal Report</button>
      <button id="generateReportBtn" type="button">User-Friendly Report</button>
      <button id="btnBengaliReport" class="primary">বাংলা রিপোর্ট</button>

      
      
      <button id="formulasBtn" type="button" class="btn-secondary">
        Formulas &amp; AI Prompt
      </button>

      <div id="loadingMessage" style="display:none; color:blue; font-weight:bold; margin:10px 0;">
        Generating report...
      </div>

    </form>

    <div class="results" id="results" style="display:none;">
      <div class="card">
        <div class="card-title">Return on Investment (ROI)</div>
        <div class="card-value" id="roiResult"></div>
      </div>
      <div class="card">
        <div class="card-title">Undiscounted Payback Period</div>
        <div class="card-value" id="paybackResult"></div>
      </div>
      <div class="card">
        <div class="card-title">Discounted Payback Period</div>
        <div class="card-value" id="dpbResult"></div>
      </div>
      <div class="card">
        <div class="card-title">Net Present Value (NPV)</div>
        <div class="card-value" id="npvResult"></div>
      </div>
      <div class="card">
        <div class="card-title">Internal Rate of Return (IRR)</div>
        <div class="card-value" id="irrResult"></div>
      </div>
      <div class="card">
        <div class="card-title">Benefit-Cost Ratio (BCR)</div>
        <div class="card-value" id="bcrResult"></div>
      </div>
      <div class="card" id="profitabilityCard">
        <div class="card-title">Result</div>
        <div class="card-value" id="profitabilityResult"></div>
      </div>

      <!-- Chart -->
      <div class="card chart-card">
        <div class="card-title">Year-wise Benefits, Costs & Payback</div>
        <div class="chart-wrap">
          <canvas id="cashflowChart"></canvas>
        </div>
        <div id="chartNote" class="chart-note"></div>
        <div id="chartNarrative" style="margin:8px 0 14px 0;"></div>
      </div>
    </div>

    <div id="reportSection" style="margin-top: 40px;"></div>
    <button type="button" id="downloadPdfBtn" style="display:none;">
        Download User-Friendly Report as PDF
    </button>
    <button type="button" id="downloadFormalPdfBtn" style="display:none;">
        Download Formal Report as PDF
    </button>

    <button id="downloadBengaliPdfBtn" class="primary outline" style="display:none;">
      বাংলা PDF ডাউনলোড
    </button>


  </div>


  <script src="/libs/pdfmake.min.js"></script>
  <script src="/libs/vfs_fonts.js"></script> <!-- provides Roboto normal/bold/italics -->

  <script src="script.js"></script>
</body>
</html>
