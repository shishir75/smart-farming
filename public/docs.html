<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Smart Farming – Formulas, Examples & AI Prompt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- MathJax for LaTeX rendering -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="libs/tex.js"></script>

  

    
  <style>
    :root{
      --blue:#0d6efd; --ink:#111827; --muted:#6b7280; --table:#e9f2ff; --stripe:#f8fafc;
    }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, sans-serif;
      line-height: 1.6; color: var(--ink); margin: 32px auto; max-width: 980px; padding: 0 16px;
    }
    h1{color:var(--blue); text-align:center; margin:0 0 12px;}
    h2{color:var(--blue); margin-top:28px; margin-bottom:10px;}
    h3{margin-top:18px; color:#1f2937;}
    p, li{ text-align: justify; }
    .muted{ color: var(--muted); }
    .box{ background:#ffffff; border:1px solid #e5e7eb; border-radius:10px; padding:14px 16px; margin:10px 0 16px; }
    table{ width:100%; border-collapse:collapse; margin:10px 0 14px; font-size:15px;}
    thead th{background:var(--table); text-align:center; padding:10px; border:1px solid #dbe3ef;}
    td{padding:10px; border:1px solid #e5e7eb; text-align:center;}
    tr:nth-child(even) td{background:var(--stripe);}
    pre{
      background:#0a0f1a; color:#e8f0ff; padding:14px; border-radius:8px; overflow:auto; line-height:1.5;
      border:1px solid #111827; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04);
    }
    code{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
  </style>
</head>
<body>
  <h1>Smart Farming – System Flow Diagram, Formulas & AI Prompt</h1>
  <p class="muted">This documents the financial math used by the Smart Farming calculator and the exact ChatGPT prompt our app sends to generate a simple report and the system cash flow explanation.</p>

  <div class="box">
    <h2 style="text-align: center;">System Flow Diagram</h2>

    <div style="display:flex; align-items:flex-start; gap:22px; margin-top:14px;">
      <!-- LEFT: Human‑friendly text -->
      <div>
        <p>
          This system works like growing a crop, step by step. First, you give a few simple
          <strong>inputs</strong>: the money you plan to invest at the start, the money you expect to
          earn each year (benefits), the money you will spend (costs), the number of years, and
          the discount rate. Think of these as seeds. Once you enter them on the website, the
          tool takes over. You do not need accounting skills or hard math; the tool does that
          for you in the background.
        </p>

        <p>
          Your inputs go to the front‑end page and then into the
          <strong>main calculator</strong>, the brain of the system. It turns your numbers into six
          easy results. <em>ROI</em> shows how much you gain compared with what you invest.
          <em>Payback</em> tells how fast you get your money back. <em>Discounted Payback</em>
          does the same, but also respects the time value of money. <em>NPV</em> adds all
          gains and costs in today’s money. <em>IRR</em> is the project’s growth rate.
          <em>BCR</em> compares the size of benefits to costs.
        </p>

        <p>
          Next, the tool draws a clear <strong>cash flow chart</strong>. Blue bars show benefits,
          red bars show costs, and a smooth line shows your running total over the years. The
          chart also marks where your money is fully recovered; both standard payback and
          discounted payback; so you can see exactly when the project starts to “pay for
          itself.” This picture makes the story of your money easy to understand at a glance.
        </p>

        <p>
          Finally, a friendly <strong>AI explanation</strong> turns the numbers and chart into
          simple words. Then the system builds a neat <strong>on‑screen report</strong> and a
          <strong>PDF</strong> you can save, print, or share. Everything; tables, charts, and
          plain‑language notes; is kept together, so you can quickly judge if your plan is
          safe, profitable, and worth the effort for your farm.
        </p>
      </div>
      <!-- RIGHT: Diagram image -->
      <div style="flex:1; min-width:260px; text-align:center;">
        <img src="img/smart_farming_system_uml.png"
            alt="Smart Farming System Flow Diagram"
            style="max-width:100%; height:auto; border:1px solid #d9d9d9; border-radius:6px;">
      </div>
    </div>
  </div>




  <div class="box">
    <h2>General Setup</h2>
    <ul>
      <li><strong>Timeline:</strong> Years \(t=0..N\). <em>Year 0</em> contains the upfront investment (initial cost). <em>Years 1..N</em> contain end-of-year operating benefits and costs.</li>
      <li><strong>Notation:</strong> \(B_t\) = benefits in year \(t\); \(C_t\) = costs in year \(t\); \(r\) = discount rate as a decimal (e.g., 10% → 0.10).</li>
      <li><strong>Cumulative net cash flow:</strong> \(Cum_t = \sum_{k=0}^{t}(B_k - C_k)\).</li>
    </ul>
  </div>

  <!-- 1) NPV -->
  <div class="box">
    <h2>1) Net Present Value (NPV)</h2>
    <p><strong>Description:</strong> NPV tells you whether the farm money you expect to earn in the future is worth more or less than the money you spend today. If the result is positive, it means you’ll come out ahead; if it’s negative, you’ll lose value.</p>
    <p>
      \[
        NPV = \sum_{t=0}^{n} \frac{B_t - C_t}{(1+r)^t}
      \]
    </p>
    <h3>Example</h3>
    <p>Year 0: \(C_0=1000\). Year 1: \(B_1=800, C_1=300\). Year 2: \(B_2=1100, C_2=400\). Discount \(r=10\%\).</p>
    <p>
      \[
        NPV = \frac{-1000}{(1.1)^0}+\frac{800-300}{1.1^1}+\frac{1100-400}{1.1^2}
        = -1000 + \frac{500}{1.1} + \frac{700}{1.21} = 33.06
      \]
    </p>
  </div>
  

  <!-- 2) ROI -->
  <div class="box">
    <h2>2) Return on Investment (ROI)</h2>
    <p><strong>Description:</strong> ROI (Return on Investment) is like checking how much extra crop you harvested for every dollar you spent on something. Say, a new piece of equipment or seeds. It’s calculated by taking what you gained (what it helped you earn) minus what it cost, then dividing by the cost, and turning that into a percentage. If ROI is positive, you’re making more than you spent. If it's negative, you’re not covering your costs.</p>
    
    <h3>Formal (Academic) Formula</h3>
    <p style="text-align:center;">
        \(\text{ROI}=\dfrac{\text{Gain from Investment - Maintanace Cost}}{\text{Initial Cost of Investment}} \times 100\% \)
    </p>

    <h3>Practitioner (Accessible) Methods</h3>
    <p>
      \[
        ROI = \frac{\sum_{t=1}^{n} (B_t - C_t)}{C_0} \times 100\%
      \]
    </p>

    <p>where, \(B_t\) = benefits in year \(t\); \(C_t\) = costs in year \(t\); \(C_0\) = Initial Cost of Investment.</p>

    <h3>Example</h3>
    <p>From the data above, net benefits \(= (Benefits - Costs) = (800 - 300) + (1100 - 400) = (500 + 700) = 1200\), initial \(C_0=1000\).</p>
    <p>\[
      ROI = \frac{1200}{1000}\times 100\% = 120\%
    \]</p>
  </div>
  





  <!-- 3) Payback -->
  <section id="payback-periods">

    <!-- 3) Undiscounted Payback Period -->
    <div class="box">
      <h2>3) Undiscounted Payback Period</h2>
      <p><strong>Description:</strong> The Undiscounted Payback Period, often called just the “payback period”, is simply the amount of time (in years) it takes for an investment to pay back its upfront cost, by adding up your net cash inflows until they cover what you originally spent. In plain terms, it's like asking, "How many harvests or seasons will it take before I’ve earned back what the equipment or investment cost me?" The shorter this time, the sooner you’ve broken even and can start making real profit. This method ignores the time value of money.</p>

      <h3>Formal (Academic) Formula</h3>
      <p style="text-align:center;">
        \[
          \mathrm{Cum}_t \;=\; \sum_{k=0}^{t}\big(B_k - C_k\big)
        \]
        \[
          \text{Payback} \;=\; (t-1) \;+\; \frac{-\,\mathrm{Cum}_{t-1}}{\,B_t - C_t\,}
          \quad \text{if } \mathrm{Cum}_{t-1}<0\le \mathrm{Cum}_t
        \]
      </p>

      <h3>Practitioner (Accessible) Methods</h3>
      <ol>
        <li>
          <em>Averaging method</em> (even cash flows): 
          <p style="text-align:center;">
            \(\text{Payback}=\dfrac{\text{Initial Investment}}{\text{Average Annual Cash Flow}}\)
          </p>
          
        </li>
        <li>
          <em>Subtracting / interpolation method</em> (uneven cash flows): 
          <p style="text-align:center;">

            \(\text{Payback}=A+\dfrac{B}{C}\)

          </p>
          where, \(A\)= full years before recovery, \(B\)= unrecovered amount at start of recovery year, \(C\)= inflow in recovery year.
        </li>
      </ol>

      <h4>Examples</h4>
      <ol>
        <li>
          <em>Averaging method:</em> Initial investment = \$50,000; average annual cash flow = \$10,000  
          <div style="text-align:center;">
            \[
              \text{Payback}=\frac{50{,}000}{10{,}000}=5\ \text{years}
            \]
          </div>
          
        </li>
        <li>
          <em>Subtracting method (uneven):</em> <span>Cash Inflow in, Year 1 = \$12,000; Year 2 = \$15,000; Year 3 = \$13,000; Year 4 = \$20,000.</span>
          <p>Unrecovered after Year 3: \(50,000-(12,000+15,000+13,000)=10,000\). </p>
          <strong>So, the Payback Period will be between Year 3 and Year 4.</strong>
          <div style="text-align:center;">
            \[
              \text{Payback}=3+\frac{10{,}000}{20{,}000}=3.5\ \text{years}
            \]
          </div>
        
        </li>
      </ol>
    </div>
    



    <!-- 4) Discounted Payback Period (DPP) -->
     <div class="box">
      <h2>4) Discounted Payback Period (DPP)</h2>
      <p><strong>Description:</strong> Same idea as payback, but each net cash flow is discounted first to respect the time value of money.</p>

      <h3>Formal (Academic) Formula</h3>
      <p style="text-align:center;">
        \[
          \mathrm{DiscNet}_t=\frac{B_t-C_t}{(1+r)^t},
          \qquad
          \mathrm{DiscCum}_t=\sum_{k=0}^{t}\mathrm{DiscNet}_k
        \]
        \[
          \text{Disc. Payback} \;=\; (t-1) \;+\; \frac{-\,\mathrm{DiscCum}_{t-1}}{\,\mathrm{DiscNet}_t\,}
          \quad \text{if } \mathrm{DiscCum}_{t-1}<0\le \mathrm{DiscCum}_t
        \]
      </p>
      <p>This is equivalent to “year before recovery + (discounted shortfall ÷ discounted inflow in recovery year)”.</p>

      <h3 style="margin-top: 10px;">Practitioner (Accessible) Method</h3>
      <p>Interpolation form:
      <p style="text-align:center;">
        \(\text{Disc. Payback}=A+\dfrac{B}{C}\)
      </p>
        where, \(A\)= full years before the discounted cumulative turns positive, \(B\)= remaining discounted balance at the start of the recovery year, \(C\)= discounted inflow in the recovery year.
      </p>
     

      <!-- DPP: Worked Example with Exact Value (formatted to single-row formulas & per-variable lines) -->
      <section id="dpp-example-exact">

        <h3>Example</h3>
        <p><strong>Given:</strong></p>
        <p><code>Initial investment</code> = −$3,000</p>
        <p><code>Annual cash inflow</code> = $1,000 (Years 1–5)</p>
        <p><code>Discount rate</code> = r = 4%</p>

        <h4>Step 1 — Discount each year’s inflow</h4>
        <p style="text-align:center;">
          \[
            \mathrm{DiscNet}_t = \frac{B_t - C_t}{(1+r)^t}
          \]
        </p>
        <table style="margin:0 auto; border-collapse:collapse;">
          <thead>
            <tr>
              <th style="border-bottom:1px solid #ccc; padding:6px 10px;">Year (t)</th>
              <th style="border-bottom:1px solid #ccc; padding:6px 10px;">Cash Inflow ($)</th>
              <th style="border-bottom:1px solid #ccc; padding:6px 10px;">Discount Factor 1/(1+r)<sup>t</sup></th>
              <th style="border-bottom:1px solid #ccc; padding:6px 10px;">Discounted Cash Inflow ($)</th>
              <th style="border-bottom:1px solid #ccc; padding:6px 10px;">Cumulative Discounted ($)</th>
            </tr>
          </thead>
          <tbody>
            <tr><td style="padding:6px 10px; text-align:center;">0</td><td style="padding:6px 10px; text-align:right;">−3,000.00</td><td style="padding:6px 10px; text-align:center;">1.00</td><td style="padding:6px 10px; text-align:right;">−3,000.00</td><td style="padding:6px 10px; text-align:right;">−3,000.00</td></tr>
            <tr><td style="padding:6px 10px; text-align:center;">1</td><td style="padding:6px 10px; text-align:right;">1,000.00</td><td style="padding:6px 10px; text-align:center;">0.961538</td><td style="padding:6px 10px; text-align:right;">961.54</td><td style="padding:6px 10px; text-align:right;">−2,038.46</td></tr>
            <tr><td style="padding:6px 10px; text-align:center;">2</td><td style="padding:6px 10px; text-align:right;">1,000.00</td><td style="padding:6px 10px; text-align:center;">0.924556</td><td style="padding:6px 10px; text-align:right;">924.56</td><td style="padding:6px 10px; text-align:right;">−1,113.90</td></tr>
            <tr><td style="padding:6px 10px; text-align:center;">3</td><td style="padding:6px 10px; text-align:right;">1,000.00</td><td style="padding:6px 10px; text-align:center;">0.888996</td><td style="padding:6px 10px; text-align:right;">889.00</td><td style="padding:6px 10px; text-align:right;">−224.90</td></tr>
            <tr><td style="padding:6px 10px; text-align:center;">4</td><td style="padding:6px 10px; text-align:right;">1,000.00</td><td style="padding:6px 10px; text-align:center;">0.854804</td><td style="padding:6px 10px; text-align:right;">854.80</td><td style="padding:6px 10px; text-align:right;">629.90</td></tr>
            <tr><td style="padding:6px 10px; text-align:center;">5</td><td style="padding:6px 10px; text-align:right;">1,000.00</td><td style="padding:6px 10px; text-align:center;">0.821927</td><td style="padding:6px 10px; text-align:right;">821.93</td><td style="padding:6px 10px; text-align:right;">1,451.82</td></tr>
          </tbody>
        </table>
        <p><em>Observation:</em> The cumulative discounted total crosses zero between Year 3 (−224.90) and Year 4 (+629.90).</p>

        <h4>Step 2 — Interpolate for the exact DPP</h4>
        <p style="text-align:center;">
          \[
            \text{Disc. Payback} = 3 + \frac{224.90}{854.80} = 3.2631 \;\approx\; \mathbf{3.26\ \text{years}}
          \]
        </p>

        <h4>Where</h4>
        <p><code>Disc. Payback</code> = discounted payback period (years)</p>
        <p><code>224.90</code> = remaining discounted shortfall at end of Year 3</p>
        <p><code>854.80</code> = discounted cash flow in Year 4</p>
        <p><code>r</code> = discount rate (4% in this example)</p>

        

      </section>
     </div>
    
  </section>





  <!-- 5) BCR -->
   <div class="box">
      <h2>5) Benefit–Cost Ratio (BCR)</h2>
      <p><strong>Description:</strong> BCR is like a quick “bang for your buck” gauge: it tells you how many dollars you expect to get back in benefit for every dollar you spend. So, if the BCR is above 1, you're getting more back than you put in; if it’s below 1, you're not.</p>
      <p>\[
        BCR = \frac{\sum_{t=0}^{n}\frac{B_t}{(1+r)^t}}{\sum_{t=0}^{n}\frac{C_t}{(1+r)^t}}
      \]</p>
      <h3>Example</h3>
      <p>
        \(PV(B)=800/1.1 + 1100/1.21 = 1636.36\).  
        \(PV(C)=300/1.1 + 400/1.21 = 603.31\).
      </p>
      <p>\[
        BCR = \frac{1636.36}{603.31} = 2.71
      \]</p>
   </div>
  

  <!-- 6) IRR -->
  <div class="box">
    <h2>6) Internal Rate of Return (IRR)</h2>
    <p><strong>Description:</strong> IRR is the yearly profit rate that shows how fast your money grows back from an investment. For a farmer, it’s like asking: “At what steady yearly rate will my new machine or system return the money I spent on it through the extra harvests it gives me?” If this rate is higher than what you could earn by keeping the money in the bank or using it somewhere else, then the investment is a smart choice. In code, we solve this numerically (Newton with multiple guesses; bisection fallback).</p>
    <p>
      \[
        0 = \sum_{t=0}^{n} \frac{B_t - C_t}{(1+IRR)^t}
      \]
    </p>
    <h3>Example</h3>
    <p>Solve \( -1000 + 500/(1+r) + 700/(1+r)^2 = 0 \Rightarrow \, IRR \approx 12.3\% \).</p>
  </div>
  

  <div class="box">
    <h2>Full ChatGPT Prompt Used by the App</h2>
    <p class="muted">The app sends the numbers and attaches the Cash Flow Chart image (as a data URL) in the same request so the model can describe the chart. The response must be a compact JSON object used to render both the on-page report and the PDF.</p>
    <pre>
      <code>You are a financial analyst. Generate a full HTML report titled "Smart Farming Investment Feasibility Report" with these sections:

        1. Project Overview: a brief overview of the Smart Farming Project including the financial analysis.

        2. Financial Summary: a table with Initial Investment, Project Lifetime, Discount Rate.

        3. Yearly Benefits and Costs: a table with Year, Benefits, Costs.

        4. Financial Metrics: a table including:
          - Return on Investment (ROI)
          - Undiscounted Payback Period
          - Discounted Payback Period
          - Net Present Value (NPV)
          - Internal Rate of Return (IRR)
          - Benefit-Cost Ratio (BCR)

        5. Analysis: a numbered list (1..6) analyzing each metric in this exact order:
          ROI, Undiscounted Payback Period, Discounted Payback Period, NPV, IRR, BCR.
          Use this HTML inside each list item:
          &lt;strong class="metric-name" style="color:blue;"&gt;METRIC&lt;/strong&gt; — &lt;em class="explanation"&gt;write 4–5 short, very easy sentences for farmers: what the number means, why it matters, and any caution.&lt;/em&gt;

        6. Cash Flow Chart Explanation: a single friendly paragraph (4–6 easy sentences) that explains the attached Cash Flow Chart image: the benefits and costs bars, the cumulative line, and the payback and discounted payback points. Use very simple words for farmers.

        7. Conclusion: a short paragraph summarizing feasibility in easy English.

        Return ONLY a compact JSON object with FOUR keys:
        - "overview": string
        - "analysis": array of 6 strings (list items using the HTML above)
        - "chartExplanation": string
        - "conclusion": string
        No code fences. No extra text.

        Write in VERY EASY English for farmers. Use friendly, short sentences and simple words.

        The app provides these facts (use them exactly):
        - Initial Investment (Year 0): ${{UPFRONT}}
        - Project Lifetime (years): {{LIFETIME}}
        - Discount Rate: {{DISCOUNT}}%
        - ROI: {{ROI}}%
        - Undiscounted Payback: {{PB}} years
        - Discounted Payback: {{DPB}} years
        - NPV: ${{NPV}}
        - IRR: {{IRR}}%
        - BCR: {{BCR}}
        - Year by year (include Year 0 initial investment): {{YEAR_LINES}}
          
        Note: cash happens at the end of each year (except the initial investment at time 0).

      </code>
    </pre>
    <p class="muted">In code, the chart image is attached to the same request as an <em>image_url</em> (data URL) in the Chat Completions API.</p>
  </div>

  




  <p class="muted">© 2025 - SARDER MD OBYDULLAH</p>
</body>
</html>
